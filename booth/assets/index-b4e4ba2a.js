var Rt=Object.defineProperty;var Ft=(n,e,l)=>e in n?Rt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[e]=l;var Ne=(n,e,l)=>(Ft(n,typeof e!="symbol"?e+"":e,l),l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function l(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(i){if(i.ep)return;i.ep=!0;const r=l(i);fetch(i.href,r)}})();function L(){}function At(n){return n()}function We(){return Object.create(null)}function ye(n){n.forEach(At)}function Fe(n){return typeof n=="function"}function F(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function Ht(n){return Object.keys(n).length===0}function m(n,e){n.appendChild(e)}function S(n,e,l){n.insertBefore(e,l||null)}function M(n){n.parentNode&&n.parentNode.removeChild(n)}function D(n,e){for(let l=0;l<n.length;l+=1)n[l]&&n[l].d(e)}function C(n){return document.createElement(n)}function Z(n){return document.createTextNode(n)}function z(){return Z(" ")}function te(){return Z("")}function St(n,e,l,t){return n.addEventListener(e,l,t),()=>n.removeEventListener(e,l,t)}function w(n,e,l){l==null?n.removeAttribute(e):n.getAttribute(e)!==l&&n.setAttribute(e,l)}function Pt(n){return Array.from(n.childNodes)}function He(n,e){e=""+e,n.data!==e&&(n.data=e)}function O(n,e,l,t){l==null?n.style.removeProperty(e):n.style.setProperty(e,l,t?"important":"")}let Pe;function $e(n){Pe=n}const ue=[],qe=[];let de=[];const xe=[],Tt=Promise.resolve();let je=!1;function Bt(){je||(je=!0,Tt.then(Nt))}function Le(n){de.push(n)}const Oe=new Set;let ce=0;function Nt(){if(ce!==0)return;const n=Pe;do{try{for(;ce<ue.length;){const e=ue[ce];ce++,$e(e),Wt(e.$$)}}catch(e){throw ue.length=0,ce=0,e}for($e(null),ue.length=0,ce=0;qe.length;)qe.pop()();for(let e=0;e<de.length;e+=1){const l=de[e];Oe.has(l)||(Oe.add(l),l())}de.length=0}while(ue.length);for(;xe.length;)xe.pop()();je=!1,Oe.clear(),$e(n)}function Wt(n){if(n.fragment!==null){n.update(),ye(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Le)}}function qt(n){const e=[],l=[];de.forEach(t=>n.indexOf(t)===-1?e.push(t):l.push(t)),l.forEach(t=>t()),de=e}const ze=new Set;let re;function B(){re={r:0,c:[],p:re}}function W(){re.r||ye(re.c),re=re.p}function d(n,e){n&&n.i&&(ze.delete(n),n.i(e))}function p(n,e,l,t){if(n&&n.o){if(ze.has(n))return;ze.add(n),re.c.push(()=>{ze.delete(n),t&&(l&&n.d(1),t())}),n.o(e)}else t&&t()}function R(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function N(n){n&&n.c()}function E(n,e,l){const{fragment:t,after_update:i}=n.$$;t&&t.m(e,l),Le(()=>{const r=n.$$.on_mount.map(At).filter(Fe);n.$$.on_destroy?n.$$.on_destroy.push(...r):ye(r),n.$$.on_mount=[]}),i.forEach(Le)}function A(n,e){const l=n.$$;l.fragment!==null&&(qt(l.after_update),ye(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function xt(n,e){n.$$.dirty[0]===-1&&(ue.push(n),Bt(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function H(n,e,l,t,i,r,o,s=[-1]){const a=Pe;$e(n);const f=n.$$={fragment:null,ctx:[],props:r,update:L,not_equal:i,bound:We(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:We(),dirty:s,skip_bound:!1,root:e.target||a.$$.root};o&&o(f.root);let b=!1;if(f.ctx=l?l(n,e.props||{},(k,y,...v)=>{const _=v.length?v[0]:y;return f.ctx&&i(f.ctx[k],f.ctx[k]=_)&&(!f.skip_bound&&f.bound[k]&&f.bound[k](_),b&&xt(n,k)),y}):[],f.update(),b=!0,ye(f.before_update),f.fragment=t?t(f.ctx):!1,e.target){if(e.hydrate){const k=Pt(e.target);f.fragment&&f.fragment.l(k),k.forEach(M)}else f.fragment&&f.fragment.c();e.intro&&d(n.$$.fragment),E(n,e.target,e.anchor),Nt()}$e(a)}class P{constructor(){Ne(this,"$$");Ne(this,"$$set")}$destroy(){A(this,1),this.$destroy=L}$on(e,l){if(!Fe(l))return L;const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(l),()=>{const i=t.indexOf(l);i!==-1&&t.splice(i,1)}}$set(e){this.$$set&&!Ht(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Xt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Xt);let we={multiplicand:[0,1],multiplier:[0,1],multiplication:{x:[0,1],y:[0,1],total:[0,0,0,1],rows:[{kind:"First",triplet:[1,1,0],booth:"PlusOneMultiplicand",E:0,S:0,inner:[0,0,1]}]}};function Ut(n){let e;return{c(){e=C("div"),w(e,"class","star svelte-1lnzuqy"),O(e,"background",n[3]),O(e,"width",n[2]+"px"),O(e,"height",n[2]+"px"),O(e,"top",n[1]),O(e,"left",n[0])},m(l,t){S(l,e,t)},p(l,[t]){t&8&&O(e,"background",l[3]),t&4&&O(e,"width",l[2]+"px"),t&4&&O(e,"height",l[2]+"px"),t&2&&O(e,"top",l[1]),t&1&&O(e,"left",l[0])},i:L,o:L,d(l){l&&M(e)}}}function Dt(n,e,l){let{x:t}=e,{y:i}=e,{size:r}=e,{color:o}=e;return n.$$set=s=>{"x"in s&&l(0,t=s.x),"y"in s&&l(1,i=s.y),"size"in s&&l(2,r=s.size),"color"in s&&l(3,o=s.color)},[t,i,r,o]}class q extends P{constructor(e){super(),H(this,e,Dt,Ut,F,{x:0,y:1,size:2,color:3})}}function Gt(n){let e,l,t,i,r,o,s,a,f,b,k,y,v,_,u,$,g,h,c,j,X,K,_e,G,ne,Y,me,V,le,J,oe,ee,Te,se,Ee,ae,Ae,fe,ke,Se,Be;return r=new q({props:{color:"gray",size:5,x:"10px",y:"5px"}}),s=new q({props:{color:"color-mix(in srgb, gray, white)",size:10,x:"30px",y:"10px"}}),f=new q({props:{color:"white",size:1,x:"25px",y:"25px"}}),k=new q({props:{color:"white",size:5,x:"10px",y:"30px"}}),v=new q({props:{color:"yellow",size:3,x:"40px",y:"32px"}}),$=new q({props:{color:"white",size:10,x:"calc(60% + 7px)",y:"10px"}}),h=new q({props:{color:"white",size:10,x:"calc(60% + 12px)",y:"10px"}}),j=new q({props:{color:"white",size:10,x:"calc(60% + 5px)",y:"13px"}}),K=new q({props:{color:"white",size:10,x:"calc(60% + 10px)",y:"13px"}}),G=new q({props:{color:"white",size:10,x:"calc(60% + 15px)",y:"13px"}}),Y=new q({props:{color:"white",size:10,x:"calc(50%)",y:"20px"}}),V=new q({props:{color:"white",size:10,x:"calc(50% + 5px)",y:"20px"}}),J=new q({props:{color:"white",size:10,x:"calc(50% - 2px)",y:"23px"}}),ee=new q({props:{color:"white",size:10,x:"calc(50% + 3px)  ",y:"23px"}}),se=new q({props:{color:"white",size:10,x:"calc(50% + 8px) ",y:"23px"}}),{c(){e=C("input"),l=z(),t=C("label"),i=C("div"),N(r.$$.fragment),o=z(),N(s.$$.fragment),a=z(),N(f.$$.fragment),b=z(),N(k.$$.fragment),y=z(),N(v.$$.fragment),_=z(),u=C("div"),N($.$$.fragment),g=z(),N(h.$$.fragment),c=z(),N(j.$$.fragment),X=z(),N(K.$$.fragment),_e=z(),N(G.$$.fragment),ne=z(),N(Y.$$.fragment),me=z(),N(V.$$.fragment),le=z(),N(J.$$.fragment),oe=z(),N(ee.$$.fragment),Te=z(),N(se.$$.fragment),Ee=z(),ae=C("link"),Ae=z(),fe=C("link"),w(e,"id","color-theme-toggle"),w(e,"type","checkbox"),w(e,"class","color-theme-toggle-checkbox svelte-1m58c1m"),w(e,"aria-label","Toggle color mode"),w(i,"class","star-container svelte-1m58c1m"),w(u,"class","clouds-container svelte-1m58c1m"),w(t,"for","color-theme-toggle"),w(t,"class","toggle-theme-toggle-label svelte-1m58c1m"),w(ae,"rel","preload"),w(ae,"as","image"),w(ae,"href","/sun.svg"),w(fe,"rel","preload"),w(fe,"as","image"),w(fe,"href","/moon.svg")},m(I,ie){S(I,e,ie),S(I,l,ie),S(I,t,ie),m(t,i),E(r,i,null),m(i,o),E(s,i,null),m(i,a),E(f,i,null),m(i,b),E(k,i,null),m(i,y),E(v,i,null),m(t,_),m(t,u),E($,u,null),m(u,g),E(h,u,null),m(u,c),E(j,u,null),m(u,X),E(K,u,null),m(u,_e),E(G,u,null),m(u,ne),E(Y,u,null),m(u,me),E(V,u,null),m(u,le),E(J,u,null),m(u,oe),E(ee,u,null),m(u,Te),E(se,u,null),S(I,Ee,ie),S(I,ae,ie),S(I,Ae,ie),S(I,fe,ie),ke=!0,Se||(Be=St(e,"click",Vt),Se=!0)},p:L,i(I){ke||(d(r.$$.fragment,I),d(s.$$.fragment,I),d(f.$$.fragment,I),d(k.$$.fragment,I),d(v.$$.fragment,I),d($.$$.fragment,I),d(h.$$.fragment,I),d(j.$$.fragment,I),d(K.$$.fragment,I),d(G.$$.fragment,I),d(Y.$$.fragment,I),d(V.$$.fragment,I),d(J.$$.fragment,I),d(ee.$$.fragment,I),d(se.$$.fragment,I),ke=!0)},o(I){p(r.$$.fragment,I),p(s.$$.fragment,I),p(f.$$.fragment,I),p(k.$$.fragment,I),p(v.$$.fragment,I),p($.$$.fragment,I),p(h.$$.fragment,I),p(j.$$.fragment,I),p(K.$$.fragment,I),p(G.$$.fragment,I),p(Y.$$.fragment,I),p(V.$$.fragment,I),p(J.$$.fragment,I),p(ee.$$.fragment,I),p(se.$$.fragment,I),ke=!1},d(I){I&&(M(e),M(l),M(t),M(Ee),M(ae),M(Ae),M(fe)),A(r),A(s),A(f),A(k),A(v),A($),A(h),A(j),A(K),A(G),A(Y),A(V),A(J),A(ee),A(se),Se=!1,Be()}}}function Vt(){document.documentElement.classList.toggle("dark-theme")}class Zt extends P{constructor(e){super(),H(this,e,null,Gt,F,{})}}function Xe(n,e,l){const t=n.slice();return t[1]=e[l],t[3]=l,t}function Ue(n){let e,l,t;return{c(){e=C("div"),e.textContent=`${n[1][0]}`,l=z(),t=C("div"),t.textContent=`${n[1][1]}`,w(e,"class","triplet svelte-1bn0zza"),O(e,"grid-row",n[3]+2),w(t,"class","encoding svelte-1bn0zza"),O(t,"grid-row",n[3]+2)},m(i,r){S(i,e,r),S(i,l,r),S(i,t,r)},p:L,d(i){i&&(M(e),M(l),M(t))}}}function Kt(n){let e,l,t,i,r,o,s,a,f,b,k,y=R(n[0]),v=[];for(let _=0;_<y.length;_+=1)v[_]=Ue(Xe(n,y,_));return{c(){e=C("div"),l=C("div"),l.textContent="multiplier bits",t=z(),i=C("div"),i.textContent="partial product",r=z(),o=C("div"),o.textContent="case",s=z();for(let _=0;_<v.length;_+=1)v[_].c();a=z(),f=C("div"),f.textContent="+",b=z(),k=C("div"),k.textContent="-",w(l,"class","header svelte-1bn0zza"),O(l,"grid-row",1),w(i,"class","header svelte-1bn0zza"),O(i,"grid-row",1),w(o,"class","header svelte-1bn0zza"),O(o,"grid-row",1),w(f,"class","case svelte-1bn0zza"),O(f,"grid-row","2 / span 4"),w(k,"class","case svelte-1bn0zza"),O(k,"grid-row","6 / span 4"),w(e,"id","table"),w(e,"class","svelte-1bn0zza")},m(_,u){S(_,e,u),m(e,l),m(e,t),m(e,i),m(e,r),m(e,o),m(e,s);for(let $=0;$<v.length;$+=1)v[$]&&v[$].m(e,null);m(e,a),m(e,f),m(e,b),m(e,k)},p(_,[u]){if(u&1){y=R(_[0]);let $;for($=0;$<y.length;$+=1){const g=Xe(_,y,$);v[$]?v[$].p(g,u):(v[$]=Ue(g),v[$].c(),v[$].m(e,a))}for(;$<v.length;$+=1)v[$].d(1);v.length=y.length}},i:L,o:L,d(_){_&&M(e),D(v,_)}}}function Yt(n){return[[["000"," +0"],["001"," +X"],["010"," +X"],["011","+2X"],["100","-2X"],["101"," -X"],["110"," -X"],["111"," -0"]]]}class Jt extends P{constructor(e){super(),H(this,e,Yt,Kt,F,{})}}function Qt(n){let e,l,t,i,r,o,s;return o=new Jt({}),{c(){e=C("div"),l=C("h3"),l.textContent="Legend",t=z(),i=C("div"),i.innerHTML=`<div class="row svelte-1hfaaek"><div class="dot svelte-1hfaaek" style="border-color: var(--head-color);"></div> <div class="description">Head bit: 1 if partial product case is +0 or if multiplicand and partial
        product case share the same sign, else 0;</div></div> <div class="row svelte-1hfaaek"><div class="dot svelte-1hfaaek" style="border-color: var(--head-negation-color);"></div> <div class="description"><span style="text-decoration:overline;">Head bit:</span>
        Negation of head bit</div></div> <div class="row svelte-1hfaaek"><div class="dot svelte-1hfaaek" style="border-color: var(--regular-color);"></div> <div class="description">Partial product bits: For the -0, -X or -2X cases, the minus sign is not
        applied with a
        <a href="https://en.wikipedia.org/wiki/Two%27s_complement">two&#39;s</a>
        but <a href="https://en.wikipedia.org/wiki/Ones&#39;_complement">one&#39;s</a>
        complement.
        <br/>
        (the missing +1 will be in the sign bit);</div></div> <div class="row svelte-1hfaaek"><div class="dot svelte-1hfaaek" style="border-color: var(--sign-color);"></div> <div class="description">Sign bit: 1 if partial product is one of negative cases, else 0;</div></div> <div class="row svelte-1hfaaek"><div class="dot svelte-1hfaaek" style="border-color: var(--filler-color);"></div> <div class="description">Filler bits:
        <br/>
        0 in multiplier: needed to grab bits 3 by 3;
        <br/>
        1 in front of head bit: ensure correct rippling bit flip effect.</div></div>`,r=z(),N(o.$$.fragment),w(l,"class","svelte-1hfaaek"),w(i,"id","legend"),w(i,"class","svelte-1hfaaek"),w(e,"id","detail-panel"),w(e,"class","svelte-1hfaaek")},m(a,f){S(a,e,f),m(e,l),m(e,t),m(e,i),m(e,r),E(o,e,null),s=!0},p:L,i(a){s||(d(o.$$.fragment,a),s=!0)},o(a){p(o.$$.fragment,a),s=!1},d(a){a&&M(e),A(o)}}}class en extends P{constructor(e){super(),H(this,e,null,Qt,F,{})}}function tn(n){let e,l,t,i,r,o,s,a,f,b,k,y,v,_,u,$,g,h,c,j,X,K,_e,G,ne,Y,me,V,le,J;return{c(){e=C("div"),l=C("h2"),l.textContent="Why this page ?",t=z(),i=C("span"),i.innerHTML=`While trying to implement the <strong>signed version of the Radix-4 Booth encoding multiplication algorithm</strong>
    (3), I encountered two mains methods:`,r=z(),o=C("ul"),o.innerHTML=`<li>Resolving each partial products, then summing them.</li> <li>Producing partial products without computing directly the carries and
      including the remaining carries into the tail bits of the next partial
      product. (for example, two&#39;s complement are only one&#39;s complement and the
      required +1 will be a bit of the following partial product)</li>`,s=z(),a=C("p"),a.textContent=`The latter has the nice property of avoiding expensive full-adder steps for\r
    the "minus" cases. However, I couldn't find a real example online going\r
    through a simple multiplication showing all intermediates bits values. Even\r
    worse, the reference paper (1) has a correct implementation, but its\r
    appendix (2), available as a standalone file online, doesn't describe the\r
    special -0 and +0 cases for the computation of the head bit, called "E"\r
    there (last page schema).`,f=z(),b=C("h2"),b.textContent="Food for thoughts",k=Z(`\r
  The booth encoding algorithm helps reducing the number of partial product, but\r
  summing them with full adders can still be expensive (latency wise). It's possible\r
  to crunch the sums using carry-save-adders (CSA) (4). CSA can help reducing groups\r
  of 3 operands to 2 quickly. Hence, using a tree of CSA can reduce the number of\r
  operands to 2, which shall finally be computed using a full adder.\r
\r
  `),y=C("div"),v=C("h2"),v.textContent="Sources",_=z(),u=C("ol"),$=C("li"),g=C("a"),h=Z(`Fast multiplication: algorithms and implementation. Gary W. Bewick,\r
          Stanford University, 1994.`),c=z(),j=C("li"),X=C("a"),K=Z(`Fast multiplication: algorithms and implementation, Appendix A. Gary\r
          W. Bewick, Stanford University, 1994.`),_e=z(),G=C("li"),ne=C("a"),Y=Z("Wikipedia page of carry-save_adder"),me=z(),V=C("li"),le=C("a"),J=Z("Wikipedia page of Booth Encoding"),w(l,"class","svelte-oj6ejd"),w(b,"class","svelte-oj6ejd"),w(v,"class","svelte-oj6ejd"),w(g,"href",ln),w(X,"href",nn),w(ne,"href",rn),w(le,"href",on),w(y,"id","sources"),w(e,"class","explanation svelte-oj6ejd")},m(oe,ee){S(oe,e,ee),m(e,l),m(e,t),m(e,i),m(e,r),m(e,o),m(e,s),m(e,a),m(e,f),m(e,b),m(e,k),m(e,y),m(y,v),m(y,_),m(y,u),m(u,$),m($,g),m(g,h),m(u,c),m(u,j),m(j,X),m(X,K),m(u,_e),m(u,G),m(G,ne),m(ne,Y),m(u,me),m(u,V),m(V,le),m(le,J)},p:L,i:L,o:L,d(oe){oe&&M(e)}}}let nn="http://i.stanford.edu/pub/cstr/reports/csl/tr/94/617/CSL-TR-94-617.pdf",ln="http://i.stanford.edu/pub/cstr/reports/csl/tr/94/617/CSL-TR-94-617.appendix.pdf",rn="https://en.wikipedia.org/wiki/Carry-save_adder",on="https://en.wikipedia.org/wiki/Booth%27s_multiplication_algorithm";class sn extends P{constructor(e){super(),H(this,e,null,tn,F,{})}}function an(n){let e;return{c(){e=C("hr"),O(e,"--text","'"+n[0]+"'"),w(e,"class","svelte-v3491u")},m(l,t){S(l,e,t)},p(l,[t]){t&1&&O(e,"--text","'"+l[0]+"'")},i:L,o:L,d(l){l&&M(e)}}}function fn(n,e,l){let{text:t}=e;return n.$$set=i=>{"text"in i&&l(0,t=i.text)},[t]}class De extends P{constructor(e){super(),H(this,e,fn,an,F,{text:0})}}function cn(n){let e,l,t,i;return{c(){e=C("div"),l=C("div"),t=z(),i=C("div"),w(l,"class","left svelte-144estw"),w(i,"class","right svelte-144estw"),w(e,"id","curly-bracket"),O(e,"grid-column","span 3 / -"+(1+2*n[0])),w(e,"class","svelte-144estw")},m(r,o){S(r,e,o),m(e,l),m(e,t),m(e,i)},p(r,[o]){o&1&&O(e,"grid-column","span 3 / -"+(1+2*r[0]))},i:L,o:L,d(r){r&&M(e)}}}function un(n,e,l){let{index:t}=e;return n.$$set=i=>{"index"in i&&l(0,t=i.index)},[t]}class gn extends P{constructor(e){super(),H(this,e,un,cn,F,{index:0})}}function dn(n){let e,l=Ge(n[1])+"",t;return{c(){e=C("div"),t=Z(l),w(e,"id","encoding"),O(e,"grid-column","span 3 / -"+(1+2*n[0])),w(e,"class","svelte-19it2ag")},m(i,r){S(i,e,r),m(e,t)},p(i,[r]){r&2&&l!==(l=Ge(i[1])+"")&&He(t,l),r&1&&O(e,"grid-column","span 3 / -"+(1+2*i[0]))},i:L,o:L,d(i){i&&M(e)}}}function Ge(n){switch(n){case"PlusZero":return"+0";case"PlusOneMultiplicand":return"+1X";case"PlusTwoMultiplicand":return"+2X";case"MinusTwoMultiplicand":return"-2X";case"MinusOneMultiplicand":return"-1X";case"MinusZero":return"-0"}}function _n(n,e,l){let{index:t}=e,{encoding:i}=e;return n.$$set=r=>{"index"in r&&l(0,t=r.index),"encoding"in r&&l(1,i=r.encoding)},[t,i]}class mn extends P{constructor(e){super(),H(this,e,_n,dn,F,{index:0,encoding:1})}}function hn(n){let e,l;return{c(){e=C("div"),l=Z(n[0]),O(e,"grid-row",n[2]+" / "+n[2]),O(e,"grid-column","span 1 / -"+(n[1]+n[3])),O(e,"color","var("+Ve(n[4])+")"),w(e,"class","svelte-17uyldz")},m(t,i){S(t,e,i),m(e,l)},p(t,[i]){i&1&&He(l,t[0]),i&4&&O(e,"grid-row",t[2]+" / "+t[2]),i&10&&O(e,"grid-column","span 1 / -"+(t[1]+t[3])),i&16&&O(e,"color","var("+Ve(t[4])+")")},i:L,o:L,d(t){t&&M(e)}}}var T=(n=>(n[n.Head=0]="Head",n[n.HeadNegation=1]="HeadNegation",n[n.Regular=2]="Regular",n[n.Sign=3]="Sign",n[n.Filler=4]="Filler",n))(T||{});function Ve(n){switch(n){case T.Head:return"--head-color";case T.HeadNegation:return"--head-negation-color";case T.Regular:return"--regular-color";case T.Filler:return"--filler-color";case T.Sign:return"--sign-color"}}function pn(n,e,l){let{bit:t}=e,{col_from_right:i}=e,{row:r}=e,{offset:o=0}=e,{type:s=T.Regular}=e;return n.$$set=a=>{"bit"in a&&l(0,t=a.bit),"col_from_right"in a&&l(1,i=a.col_from_right),"row"in a&&l(2,r=a.row),"offset"in a&&l(3,o=a.offset),"type"in a&&l(4,s=a.type)},[t,i,r,o,s]}class x extends P{constructor(e){super(),H(this,e,pn,hn,F,{bit:0,col_from_right:1,row:2,offset:3,type:4})}}function Ze(n,e,l){const t=n.slice();return t[1]=e[l],t[3]=l,t}function Ke(n){let e,l;return e=new x({props:{bit:n[1],row:1,col_from_right:n[0].length-n[3],offset:1}}),{c(){N(e.$$.fragment)},m(t,i){E(e,t,i),l=!0},p(t,i){const r={};i&1&&(r.bit=t[1]),i&1&&(r.col_from_right=t[0].length-t[3]),e.$set(r)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function bn(n){let e,l,t=R(n[0]),i=[];for(let o=0;o<t.length;o+=1)i[o]=Ke(Ze(n,t,o));const r=o=>p(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=te()},m(o,s){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(o,s);S(o,e,s),l=!0},p(o,[s]){if(s&1){t=R(o[0]);let a;for(a=0;a<t.length;a+=1){const f=Ze(o,t,a);i[a]?(i[a].p(f,s),d(i[a],1)):(i[a]=Ke(f),i[a].c(),d(i[a],1),i[a].m(e.parentNode,e))}for(B(),a=t.length;a<i.length;a+=1)r(a);W()}},i(o){if(!l){for(let s=0;s<t.length;s+=1)d(i[s]);l=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)p(i[s]);l=!1},d(o){o&&M(e),D(i,o)}}}function $n(n,e,l){let{multiplicand:t}=e;return n.$$set=i=>{"multiplicand"in i&&l(0,t=i.multiplicand)},[t]}class wn extends P{constructor(e){super(),H(this,e,$n,bn,F,{multiplicand:0})}}function Ye(n,e,l){const t=n.slice();return t[1]=e[l],t[3]=l,t}function Je(n){let e,l;return e=new x({props:{bit:0,row:2,col_from_right:n[0].length+1,offset:1,type:T.Filler}}),{c(){N(e.$$.fragment)},m(t,i){E(e,t,i),l=!0},p(t,i){const r={};i&1&&(r.col_from_right=t[0].length+1),e.$set(r)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Qe(n){let e,l;return e=new x({props:{bit:n[1],row:2,col_from_right:n[0].length-n[3],offset:1}}),{c(){N(e.$$.fragment)},m(t,i){E(e,t,i),l=!0},p(t,i){const r={};i&1&&(r.bit=t[1]),i&1&&(r.col_from_right=t[0].length-t[3]),e.$set(r)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function vn(n){let e,l,t,i,r=n[0].length%2==1&&Je(n),o=R(n[0]),s=[];for(let f=0;f<o.length;f+=1)s[f]=Qe(Ye(n,o,f));const a=f=>p(s[f],1,1,()=>{s[f]=null});return t=new x({props:{bit:0,row:2,col_from_right:1,offset:0,type:T.Filler}}),{c(){r&&r.c(),e=z();for(let f=0;f<s.length;f+=1)s[f].c();l=z(),N(t.$$.fragment)},m(f,b){r&&r.m(f,b),S(f,e,b);for(let k=0;k<s.length;k+=1)s[k]&&s[k].m(f,b);S(f,l,b),E(t,f,b),i=!0},p(f,[b]){if(f[0].length%2==1?r?(r.p(f,b),b&1&&d(r,1)):(r=Je(f),r.c(),d(r,1),r.m(e.parentNode,e)):r&&(B(),p(r,1,1,()=>{r=null}),W()),b&1){o=R(f[0]);let k;for(k=0;k<o.length;k+=1){const y=Ye(f,o,k);s[k]?(s[k].p(y,b),d(s[k],1)):(s[k]=Qe(y),s[k].c(),d(s[k],1),s[k].m(l.parentNode,l))}for(B(),k=o.length;k<s.length;k+=1)a(k);W()}},i(f){if(!i){d(r);for(let b=0;b<o.length;b+=1)d(s[b]);d(t.$$.fragment,f),i=!0}},o(f){p(r),s=s.filter(Boolean);for(let b=0;b<s.length;b+=1)p(s[b]);p(t.$$.fragment,f),i=!1},d(f){f&&(M(e),M(l)),r&&r.d(f),D(s,f),A(t,f)}}}function yn(n,e,l){let{multiplier:t}=e;return n.$$set=i=>{"multiplier"in i&&l(0,t=i.multiplier)},[t]}class kn extends P{constructor(e){super(),H(this,e,yn,vn,F,{multiplier:0})}}function et(n,e,l){const t=n.slice();return t[4]=e[l],t[6]=l,t}function tt(n,e,l){const t=n.slice();return t[7]=e[l],t[6]=l,t}function nt(n){let e,l;return e=new gn({props:{index:n[6]}}),{c(){N(e.$$.fragment)},m(t,i){E(e,t,i),l=!0},p:L,i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function lt(n){let e,l;return e=new mn({props:{index:n[6],encoding:n[4]}}),{c(){N(e.$$.fragment)},m(t,i){E(e,t,i),l=!0},p(t,i){const r={};i&4&&(r.encoding=t[4]),e.$set(r)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function zn(n){let e,l,t,i,r,o,s;l=new wn({props:{multiplicand:n[0]}}),i=new kn({props:{multiplier:n[1]}});let a=R(n[2]),f=[];for(let _=0;_<a.length;_+=1)f[_]=nt(tt(n,a,_));const b=_=>p(f[_],1,1,()=>{f[_]=null});let k=R(n[2]),y=[];for(let _=0;_<k.length;_+=1)y[_]=lt(et(n,k,_));const v=_=>p(y[_],1,1,()=>{y[_]=null});return{c(){e=C("div"),N(l.$$.fragment),t=z(),N(i.$$.fragment),r=z();for(let _=0;_<f.length;_+=1)f[_].c();o=z();for(let _=0;_<y.length;_+=1)y[_].c();w(e,"id","operands"),O(e,"grid-template-columns","repeat("+n[3]+", 1fr)"),w(e,"class","svelte-ny6333")},m(_,u){S(_,e,u),E(l,e,null),m(e,t),E(i,e,null),m(e,r);for(let $=0;$<f.length;$+=1)f[$]&&f[$].m(e,null);m(e,o);for(let $=0;$<y.length;$+=1)y[$]&&y[$].m(e,null);s=!0},p(_,[u]){const $={};u&1&&($.multiplicand=_[0]),l.$set($);const g={};if(u&2&&(g.multiplier=_[1]),i.$set(g),u&4){a=R(_[2]);let h;for(h=0;h<a.length;h+=1){const c=tt(_,a,h);f[h]?(f[h].p(c,u),d(f[h],1)):(f[h]=nt(c),f[h].c(),d(f[h],1),f[h].m(e,o))}for(B(),h=a.length;h<f.length;h+=1)b(h);W()}if(u&4){k=R(_[2]);let h;for(h=0;h<k.length;h+=1){const c=et(_,k,h);y[h]?(y[h].p(c,u),d(y[h],1)):(y[h]=lt(c),y[h].c(),d(y[h],1),y[h].m(e,null))}for(B(),h=k.length;h<y.length;h+=1)v(h);W()}(!s||u&8)&&O(e,"grid-template-columns","repeat("+_[3]+", 1fr)")},i(_){if(!s){d(l.$$.fragment,_),d(i.$$.fragment,_);for(let u=0;u<a.length;u+=1)d(f[u]);for(let u=0;u<k.length;u+=1)d(y[u]);s=!0}},o(_){p(l.$$.fragment,_),p(i.$$.fragment,_),f=f.filter(Boolean);for(let u=0;u<f.length;u+=1)p(f[u]);y=y.filter(Boolean);for(let u=0;u<y.length;u+=1)p(y[u]);s=!1},d(_){_&&M(e),A(l),A(i),D(f,_),D(y,_)}}}function Cn(n,e,l){let t,{multiplicand:i}=e,{multiplier:r}=e,{encodings:o}=e;return n.$$set=s=>{"multiplicand"in s&&l(0,i=s.multiplicand),"multiplier"in s&&l(1,r=s.multiplier),"encodings"in s&&l(2,o=s.encodings)},n.$$.update=()=>{n.$$.dirty&3&&l(3,t=i.length+r.length+1)},[i,r,o,t]}class Mn extends P{constructor(e){super(),H(this,e,Cn,zn,F,{multiplicand:0,multiplier:1,encodings:2})}}function it(n,e,l){const t=n.slice();return t[2]=e[l],t[4]=l,t}function rt(n,e,l){const t=n.slice();return t[2]=e[l],t[4]=l,t}function ot(n,e,l){const t=n.slice();t[2]=e[l],t[9]=l;const i=Me(t[2],t[9],t[1]);t[6]=i;const r=Ot(t[2],t[9],t[1]);return t[7]=r,t}function st(n,e,l){const t=n.slice();return t[10]=e[l],t[12]=l,t}function at(n,e,l){const t=n.slice();t[2]=e[l],t[9]=l;const i=Me(t[2],t[9],t[1]);t[6]=i;const r=Ot(t[2],t[9],t[1]);t[7]=r;const o=t[6]-t[7];return t[13]=o,t}function En(n){let e,l;return e=new x({props:{bit:n[2].E,row:n[9]+1,col_from_right:1+n[9]*2+n[7],offset:1,type:T.Head}}),{c(){N(e.$$.fragment)},m(t,i){E(e,t,i),l=!0},p(t,i){const r={};i&1&&(r.bit=t[2].E),i&3&&(r.col_from_right=1+t[9]*2+t[7]),e.$set(r)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function An(n){let e,l,t=n[13]>0&&ft(n);return{c(){t&&t.c(),e=te()},m(i,r){t&&t.m(i,r),S(i,e,r),l=!0},p(i,r){i[13]>0?t?(t.p(i,r),r&3&&d(t,1)):(t=ft(i),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(B(),p(t,1,1,()=>{t=null}),W())},i(i){l||(d(t),l=!0)},o(i){p(t),l=!1},d(i){i&&M(e),t&&t.d(i)}}}function Sn(n){let e,l,t=n[13]>0&&ut(n);return{c(){t&&t.c(),e=te()},m(i,r){t&&t.m(i,r),S(i,e,r),l=!0},p(i,r){i[13]>0?t?(t.p(i,r),r&3&&d(t,1)):(t=ut(i),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(B(),p(t,1,1,()=>{t=null}),W())},i(i){l||(d(t),l=!0)},o(i){p(t),l=!1},d(i){i&&M(e),t&&t.d(i)}}}function ft(n){let e,l,t,i;e=new x({props:{bit:n[2].E,row:n[9]+1,col_from_right:1+n[9]*2+n[7],offset:1,type:T.Head}});let r=n[13]>1&&ct(n);return{c(){N(e.$$.fragment),l=z(),r&&r.c(),t=te()},m(o,s){E(e,o,s),S(o,l,s),r&&r.m(o,s),S(o,t,s),i=!0},p(o,s){const a={};s&1&&(a.bit=o[2].E),s&3&&(a.col_from_right=1+o[9]*2+o[7]),e.$set(a),o[13]>1?r?(r.p(o,s),s&3&&d(r,1)):(r=ct(o),r.c(),d(r,1),r.m(t.parentNode,t)):r&&(B(),p(r,1,1,()=>{r=null}),W())},i(o){i||(d(e.$$.fragment,o),d(r),i=!0)},o(o){p(e.$$.fragment,o),p(r),i=!1},d(o){o&&(M(l),M(t)),A(e,o),r&&r.d(o)}}}function ct(n){let e,l;return e=new x({props:{bit:1,row:n[9]+1,col_from_right:1+n[9]*2+n[7]+1,offset:1,type:T.Filler}}),{c(){N(e.$$.fragment)},m(t,i){E(e,t,i),l=!0},p(t,i){const r={};i&3&&(r.col_from_right=1+t[9]*2+t[7]+1),e.$set(r)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function ut(n){let e,l,t,i;e=new x({props:{bit:1-n[2].E,row:n[9]+1,col_from_right:1+n[9]*2+n[7],offset:1,type:T.HeadNegation}});let r=n[13]>1&&gt(n);return{c(){N(e.$$.fragment),l=z(),r&&r.c(),t=te()},m(o,s){E(e,o,s),S(o,l,s),r&&r.m(o,s),S(o,t,s),i=!0},p(o,s){const a={};s&1&&(a.bit=1-o[2].E),s&3&&(a.col_from_right=1+o[9]*2+o[7]),e.$set(a),o[13]>1?r?(r.p(o,s),s&3&&d(r,1)):(r=gt(o),r.c(),d(r,1),r.m(t.parentNode,t)):r&&(B(),p(r,1,1,()=>{r=null}),W())},i(o){i||(d(e.$$.fragment,o),d(r),i=!0)},o(o){p(e.$$.fragment,o),p(r),i=!1},d(o){o&&(M(l),M(t)),A(e,o),r&&r.d(o)}}}function gt(n){let e,l,t,i;e=new x({props:{bit:1-n[2].E,row:n[9]+1,col_from_right:1+n[9]*2+n[7]+1,offset:1,type:T.HeadNegation}});let r=n[13]>2&&dt(n);return{c(){N(e.$$.fragment),l=z(),r&&r.c(),t=te()},m(o,s){E(e,o,s),S(o,l,s),r&&r.m(o,s),S(o,t,s),i=!0},p(o,s){const a={};s&1&&(a.bit=1-o[2].E),s&3&&(a.col_from_right=1+o[9]*2+o[7]+1),e.$set(a),o[13]>2?r?(r.p(o,s),s&3&&d(r,1)):(r=dt(o),r.c(),d(r,1),r.m(t.parentNode,t)):r&&(B(),p(r,1,1,()=>{r=null}),W())},i(o){i||(d(e.$$.fragment,o),d(r),i=!0)},o(o){p(e.$$.fragment,o),p(r),i=!1},d(o){o&&(M(l),M(t)),A(e,o),r&&r.d(o)}}}function dt(n){let e,l;return e=new x({props:{bit:n[2].E,row:n[9]+1,col_from_right:1+n[9]*2+n[7]+2,offset:1,type:T.Head}}),{c(){N(e.$$.fragment)},m(t,i){E(e,t,i),l=!0},p(t,i){const r={};i&1&&(r.bit=t[2].E),i&3&&(r.col_from_right=1+t[9]*2+t[7]+2),e.$set(r)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function _t(n){let e,l,t,i;const r=[Sn,An,En],o=[];function s(a,f){return a[2].kind=="First"?0:(a[2].kind="Middle")?1:a[13]>0?2:-1}return~(e=s(n))&&(l=o[e]=r[e](n)),{c(){l&&l.c(),t=te()},m(a,f){~e&&o[e].m(a,f),S(a,t,f),i=!0},p(a,f){let b=e;e=s(a),e===b?~e&&o[e].p(a,f):(l&&(B(),p(o[b],1,1,()=>{o[b]=null}),W()),~e?(l=o[e],l?l.p(a,f):(l=o[e]=r[e](a),l.c()),d(l,1),l.m(t.parentNode,t)):l=null)},i(a){i||(d(l),i=!0)},o(a){p(l),i=!1},d(a){a&&M(t),~e&&o[e].d(a)}}}function mt(n){let e,l;return e=new x({props:{bit:n[2].inner[n[2].inner.length-n[12]-1],row:n[9]+1,col_from_right:1+n[9]*2+n[12],offset:1,type:T.Regular}}),{c(){N(e.$$.fragment)},m(t,i){E(e,t,i),l=!0},p(t,i){const r={};i&1&&(r.bit=t[2].inner[t[2].inner.length-t[12]-1]),e.$set(r)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function ht(n){let e,l,t=R(Array(n[7]).fill(null)),i=[];for(let o=0;o<t.length;o+=1)i[o]=mt(st(n,t,o));const r=o=>p(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=te()},m(o,s){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(o,s);S(o,e,s),l=!0},p(o,s){if(s&3){t=R(Array(o[7]).fill(null));let a;for(a=0;a<t.length;a+=1){const f=st(o,t,a);i[a]?(i[a].p(f,s),d(i[a],1)):(i[a]=mt(f),i[a].c(),d(i[a],1),i[a].m(e.parentNode,e))}for(B(),a=t.length;a<i.length;a+=1)r(a);W()}},i(o){if(!l){for(let s=0;s<t.length;s+=1)d(i[s]);l=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)p(i[s]);l=!1},d(o){o&&M(e),D(i,o)}}}function pt(n){let e;return{c(){e=C("div"),w(e,"class","horizontal svelte-15d0q7h"),O(e,"grid-row",n[4]+1+" / "+(n[4]+1)+" "),O(e,"grid-column","span "+(Me(n[2],n[4],n[1])-1)+" / "+-(1+1+1+n[4]*2)+" ")},m(l,t){S(l,e,t)},p(l,t){t&3&&O(e,"grid-column","span "+(Me(l[2],l[4],l[1])-1)+" / "+-(1+1+1+l[4]*2)+" ")},d(l){l&&M(e)}}}function bt(n){let e,l,t,i,r,o;return e=new x({props:{bit:n[2].S,row:n[4]+1+1,col_from_right:1+n[4]*2,offset:1,type:T.Sign}}),{c(){N(e.$$.fragment),l=z(),t=C("div"),i=z(),r=C("div"),w(t,"class","corner svelte-15d0q7h"),O(t,"grid-row",n[4]+1+" / "+(n[4]+1)+" "),O(t,"grid-column","span 1 / "+-(1+1+n[4]*2)+" "),w(r,"class","below svelte-15d0q7h"),O(r,"grid-row",n[4]+2+" / "+(n[4]+2)+" "),O(r,"grid-column","span 1 / "+-(1+1+n[4]*2)+" ")},m(s,a){E(e,s,a),S(s,l,a),S(s,t,a),S(s,i,a),S(s,r,a),o=!0},p(s,a){const f={};a&1&&(f.bit=s[2].S),e.$set(f)},i(s){o||(d(e.$$.fragment,s),o=!0)},o(s){p(e.$$.fragment,s),o=!1},d(s){s&&(M(l),M(t),M(i),M(r)),A(e,s)}}}function Nn(n){let e,l,t,i,r,o=R(n[0]),s=[];for(let g=0;g<o.length;g+=1)s[g]=_t(at(n,o,g));const a=g=>p(s[g],1,1,()=>{s[g]=null});let f=R(n[0]),b=[];for(let g=0;g<f.length;g+=1)b[g]=ht(ot(n,f,g));const k=g=>p(b[g],1,1,()=>{b[g]=null});let y=R(n[0]),v=[];for(let g=0;g<y.length;g+=1)v[g]=pt(rt(n,y,g));let _=R(n[0]),u=[];for(let g=0;g<_.length;g+=1)u[g]=bt(it(n,_,g));const $=g=>p(u[g],1,1,()=>{u[g]=null});return{c(){e=C("div");for(let g=0;g<s.length;g+=1)s[g].c();l=z();for(let g=0;g<b.length;g+=1)b[g].c();t=z();for(let g=0;g<v.length;g+=1)v[g].c();i=z();for(let g=0;g<u.length;g+=1)u[g].c();w(e,"id","partial-products"),O(e,"grid-template-columns","repeat("+(n[1]+1)+", 1fr)"),O(e,"grid-template-rows","repeat("+(n[0].length+1)+", 1fr)"),w(e,"class","svelte-15d0q7h")},m(g,h){S(g,e,h);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);m(e,l);for(let c=0;c<b.length;c+=1)b[c]&&b[c].m(e,null);m(e,t);for(let c=0;c<v.length;c+=1)v[c]&&v[c].m(e,null);m(e,i);for(let c=0;c<u.length;c+=1)u[c]&&u[c].m(e,null);r=!0},p(g,[h]){if(h&3){o=R(g[0]);let c;for(c=0;c<o.length;c+=1){const j=at(g,o,c);s[c]?(s[c].p(j,h),d(s[c],1)):(s[c]=_t(j),s[c].c(),d(s[c],1),s[c].m(e,l))}for(B(),c=o.length;c<s.length;c+=1)a(c);W()}if(h&3){f=R(g[0]);let c;for(c=0;c<f.length;c+=1){const j=ot(g,f,c);b[c]?(b[c].p(j,h),d(b[c],1)):(b[c]=ht(j),b[c].c(),d(b[c],1),b[c].m(e,t))}for(B(),c=f.length;c<b.length;c+=1)k(c);W()}if(h&3){y=R(g[0]);let c;for(c=0;c<y.length;c+=1){const j=rt(g,y,c);v[c]?v[c].p(j,h):(v[c]=pt(j),v[c].c(),v[c].m(e,i))}for(;c<v.length;c+=1)v[c].d(1);v.length=y.length}if(h&1){_=R(g[0]);let c;for(c=0;c<_.length;c+=1){const j=it(g,_,c);u[c]?(u[c].p(j,h),d(u[c],1)):(u[c]=bt(j),u[c].c(),d(u[c],1),u[c].m(e,null))}for(B(),c=_.length;c<u.length;c+=1)$(c);W()}(!r||h&2)&&O(e,"grid-template-columns","repeat("+(g[1]+1)+", 1fr)"),(!r||h&1)&&O(e,"grid-template-rows","repeat("+(g[0].length+1)+", 1fr)")},i(g){if(!r){for(let h=0;h<o.length;h+=1)d(s[h]);for(let h=0;h<f.length;h+=1)d(b[h]);for(let h=0;h<_.length;h+=1)d(u[h]);r=!0}},o(g){s=s.filter(Boolean);for(let h=0;h<s.length;h+=1)p(s[h]);b=b.filter(Boolean);for(let h=0;h<b.length;h+=1)p(b[h]);u=u.filter(Boolean);for(let h=0;h<u.length;h+=1)p(u[h]);r=!1},d(g){g&&M(e),D(s,g),D(b,g),D(v,g),D(u,g)}}}function Me(n,e,l){let t=e*2,i=n.inner.length;switch(n.kind){case"First":i+=3;break;case"Middle":i+=2;break;case"Last":i+=1;break}return Math.min(l,i+t)-t}function Ot(n,e,l){let t=e*2;return Math.min(l,n.inner.length+t)-t}function On(n,e,l){let{rows:t}=e,{multiplication_width:i}=e;return n.$$set=r=>{"rows"in r&&l(0,t=r.rows),"multiplication_width"in r&&l(1,i=r.multiplication_width)},[t,i]}class In extends P{constructor(e){super(),H(this,e,On,Nn,F,{rows:0,multiplication_width:1})}}function jn(n){let e;return{c(){e=C("div"),w(e,"class","separator svelte-sc31rf")},m(l,t){S(l,e,t)},p:L,i:L,o:L,d(l){l&&M(e)}}}class $t extends P{constructor(e){super(),H(this,e,null,jn,F,{})}}function wt(n,e,l){const t=n.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function vt(n){let e,l;return e=new x({props:{bit:n[2],col_from_right:n[0].length-n[1],row:1,offset:1}}),{c(){N(e.$$.fragment)},m(t,i){E(e,t,i),l=!0},p(t,i){const r={};i&1&&(r.bit=t[2]),i&1&&(r.col_from_right=t[0].length-t[1]),e.$set(r)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Ln(n){let e,l,t=R(n[0].entries()),i=[];for(let o=0;o<t.length;o+=1)i[o]=vt(wt(n,t,o));const r=o=>p(i[o],1,1,()=>{i[o]=null});return{c(){e=C("div");for(let o=0;o<i.length;o+=1)i[o].c();w(e,"id","total"),O(e,"grid-template-columns","repeat("+(n[0].length+1)+", 1fr)"),w(e,"class","svelte-1nfbkmz")},m(o,s){S(o,e,s);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);l=!0},p(o,[s]){if(s&1){t=R(o[0].entries());let a;for(a=0;a<t.length;a+=1){const f=wt(o,t,a);i[a]?(i[a].p(f,s),d(i[a],1)):(i[a]=vt(f),i[a].c(),d(i[a],1),i[a].m(e,null))}for(B(),a=t.length;a<i.length;a+=1)r(a);W()}(!l||s&1)&&O(e,"grid-template-columns","repeat("+(o[0].length+1)+", 1fr)")},i(o){if(!l){for(let s=0;s<t.length;s+=1)d(i[s]);l=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)p(i[s]);l=!1},d(o){o&&M(e),D(i,o)}}}function Rn(n,e,l){let{bits:t}=e;return n.$$set=i=>{"bits"in i&&l(0,t=i.bits)},[t]}class Fn extends P{constructor(e){super(),H(this,e,Rn,Ln,F,{bits:0})}}function Hn(n){let e,l,t,i,r,o,s,a,f,b,k,y,v,_,u;return l=new Mn({props:{multiplicand:n[1].x,multiplier:n[1].y,encodings:n[1].rows.map(yt)}}),i=new $t({}),o=new De({props:{text:"partial products"}}),a=new In({props:{rows:n[1].rows,multiplication_width:n[2]}}),b=new $t({}),y=new De({props:{text:"total"}}),_=new Fn({props:{bits:n[1].total}}),{c(){e=C("div"),N(l.$$.fragment),t=z(),N(i.$$.fragment),r=z(),N(o.$$.fragment),s=z(),N(a.$$.fragment),f=z(),N(b.$$.fragment),k=z(),N(y.$$.fragment),v=z(),N(_.$$.fragment),w(e,"id","multiplication"),O(e,"filter",(n[0]?"blur(0px)":"blur(2px)")+" "),w(e,"class","svelte-yg9wa8")},m($,g){S($,e,g),E(l,e,null),m(e,t),E(i,e,null),m(e,r),E(o,e,null),m(e,s),E(a,e,null),m(e,f),E(b,e,null),m(e,k),E(y,e,null),m(e,v),E(_,e,null),u=!0},p($,[g]){const h={};g&2&&(h.multiplicand=$[1].x),g&2&&(h.multiplier=$[1].y),g&2&&(h.encodings=$[1].rows.map(yt)),l.$set(h);const c={};g&2&&(c.rows=$[1].rows),g&4&&(c.multiplication_width=$[2]),a.$set(c);const j={};g&2&&(j.bits=$[1].total),_.$set(j),(!u||g&1)&&O(e,"filter",($[0]?"blur(0px)":"blur(2px)")+" ")},i($){u||(d(l.$$.fragment,$),d(i.$$.fragment,$),d(o.$$.fragment,$),d(a.$$.fragment,$),d(b.$$.fragment,$),d(y.$$.fragment,$),d(_.$$.fragment,$),u=!0)},o($){p(l.$$.fragment,$),p(i.$$.fragment,$),p(o.$$.fragment,$),p(a.$$.fragment,$),p(b.$$.fragment,$),p(y.$$.fragment,$),p(_.$$.fragment,$),u=!1},d($){$&&M(e),A(l),A(i),A(o),A(a),A(b),A(y),A(_)}}}const yt=n=>n.booth;function Pn(n,e,l){let t,{show_multiplication:i=!0}=e,{multiplication:r}=e;return n.$$set=o=>{"show_multiplication"in o&&l(0,i=o.show_multiplication),"multiplication"in o&&l(1,r=o.multiplication)},n.$$.update=()=>{n.$$.dirty&2&&l(2,t=r.x.length+r.y.length)},[i,r,t]}class Tn extends P{constructor(e){super(),H(this,e,Pn,Hn,F,{show_multiplication:0,multiplication:1})}}function Bn(n){let e,l,t,i,r,o,s;return{c(){e=C("div"),l=C("span"),t=Z(n[1]),i=z(),r=C("input"),w(l,"class","svelte-1c70eqh"),w(r,"class","form-field svelte-1c70eqh"),w(r,"type","text"),r.value=n[0],r.required=!0,w(r,"pattern","[10]+"),w(e,"class","form-group svelte-1c70eqh")},m(a,f){S(a,e,f),m(e,l),m(l,t),m(e,i),m(e,r),o||(s=St(r,"input",function(){Fe(n[2])&&n[2].apply(this,arguments)}),o=!0)},p(a,[f]){n=a,f&2&&He(t,n[1]),f&1&&r.value!==n[0]&&(r.value=n[0])},i:L,o:L,d(a){a&&M(e),o=!1,s()}}}function Wn(n,e,l){let{initial_value:t}=e,{text:i}=e,{onInputChange:r}=e;return n.$$set=o=>{"initial_value"in o&&l(0,t=o.initial_value),"text"in o&&l(1,i=o.text),"onInputChange"in o&&l(2,r=o.onInputChange)},[t,i,r]}class kt extends P{constructor(e){super(),H(this,e,Wn,Bn,F,{initial_value:0,text:1,onInputChange:2})}}function qn(n){let e,l,t,i,r,o,s;return l=new kt({props:{text:"X",onInputChange:n[0],initial_value:we.multiplicand.join("")}}),o=new kt({props:{text:"Y",onInputChange:n[1],initial_value:we.multiplier.join("")}}),{c(){e=C("div"),N(l.$$.fragment),t=z(),i=C("div"),i.textContent="✖️",r=z(),N(o.$$.fragment),w(e,"class","row-inputs svelte-s5blt3")},m(a,f){S(a,e,f),E(l,e,null),m(e,t),m(e,i),m(e,r),E(o,e,null),s=!0},p:L,i(a){s||(d(l.$$.fragment,a),d(o.$$.fragment,a),s=!0)},o(a){p(l.$$.fragment,a),p(o.$$.fragment,a),s=!1},d(a){a&&M(e),A(l),A(o)}}}function zt(n){return n.split("").map(e=>parseInt(e,10))}function Ct(n){return n.every(e=>!isNaN(e)&&(e==0||e==1))}function xn(n,e,l){let{onMultiplicandChange:t}=e,{onMultiplierChange:i}=e;function r(s){let a=zt(s.target.value),b=Ct(a)&&a.length>0;t(b?a:null)}function o(s){let a=zt(s.target.value),b=Ct(a)&&a.length>0;i(b?a:null)}return n.$$set=s=>{"onMultiplicandChange"in s&&l(2,t=s.onMultiplicandChange),"onMultiplierChange"in s&&l(3,i=s.onMultiplierChange)},[r,o,t,i]}class Xn extends P{constructor(e){super(),H(this,e,xn,qn,F,{onMultiplicandChange:2,onMultiplierChange:3})}}function Un(n){let e,l,t,i,r,o,s,a,f,b,k,y,v,_,u,$,g,h;return t=new Zt({}),f=new Xn({props:{onMultiplicandChange:n[2],onMultiplierChange:n[3]}}),v=new Tn({props:{show_multiplication:n[1],multiplication:n[0]}}),u=new en({}),g=new sn({}),{c(){e=C("h1"),e.textContent="Booth encoding",l=z(),N(t.$$.fragment),i=z(),r=C("div"),o=C("div"),s=C("h3"),s.textContent="Multiplication",a=z(),N(f.$$.fragment),b=z(),k=C("div"),y=z(),N(v.$$.fragment),_=z(),N(u.$$.fragment),$=z(),N(g.$$.fragment),w(e,"class","svelte-b36dz0"),w(s,"class","svelte-b36dz0"),w(k,"class","separator svelte-b36dz0"),w(o,"id","main-panel"),w(o,"class","svelte-b36dz0"),w(r,"id","app"),w(r,"class","svelte-b36dz0")},m(c,j){S(c,e,j),S(c,l,j),E(t,c,j),S(c,i,j),S(c,r,j),m(r,o),m(o,s),m(o,a),E(f,o,null),m(o,b),m(o,k),m(o,y),E(v,o,null),m(r,_),E(u,r,null),S(c,$,j),E(g,c,j),h=!0},p(c,[j]){const X={};j&2&&(X.show_multiplication=c[1]),j&1&&(X.multiplication=c[0]),v.$set(X)},i(c){h||(d(t.$$.fragment,c),d(f.$$.fragment,c),d(v.$$.fragment,c),d(u.$$.fragment,c),d(g.$$.fragment,c),h=!0)},o(c){p(t.$$.fragment,c),p(f.$$.fragment,c),p(v.$$.fragment,c),p(u.$$.fragment,c),p(g.$$.fragment,c),h=!1},d(c){c&&(M(e),M(l),M(i),M(r),M($)),A(t,c),A(f),A(v),A(u),A(g,c)}}}function Dn(n,e,l){let t,{bindings:i}=e,r=we.multiplicand,o=!0,s=we.multiplier,a=!0,f=we.multiplication;function b(v){v!=null?(r=v,l(5,o=!0),y()):l(5,o=!1)}function k(v){v!=null?(s=v,l(6,a=!0),y()):l(6,a=!1)}function y(){const v=new Uint8Array(r),_=new Uint8Array(s);l(0,f=i.get_multiplication(v,_))}return n.$$set=v=>{"bindings"in v&&l(4,i=v.bindings)},n.$$.update=()=>{n.$$.dirty&96&&l(1,t=o&&a)},[f,t,b,k,i,o,a]}class Gn extends P{constructor(e){super(),H(this,e,Dn,Un,F,{bindings:4})}}let U;const Q=new Array(128).fill(void 0);Q.push(void 0,null,!0,!1);function Ce(n){return Q[n]}let ve=Q.length;function Vn(n){n<132||(Q[n]=ve,ve=n)}function ge(n){const e=Ce(n);return Vn(n),e}function he(n){ve===Q.length&&Q.push(Q.length+1);const e=ve;return ve=Q[e],Q[e]=n,e}const It=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&It.decode();let pe=null;function jt(){return(pe===null||pe.byteLength===0)&&(pe=new Uint8Array(U.memory.buffer)),pe}function Mt(n,e){return n=n>>>0,It.decode(jt().subarray(n,n+e))}let Re=0;function Et(n,e){const l=e(n.length*1,1)>>>0;return jt().set(n,l/1),Re=n.length,l}let be=null;function Ie(){return(be===null||be.byteLength===0)&&(be=new Int32Array(U.memory.buffer)),be}function Zn(n,e){try{const r=U.__wbindgen_add_to_stack_pointer(-16),o=Et(n,U.__wbindgen_malloc),s=Re,a=Et(e,U.__wbindgen_malloc),f=Re;U.get_multiplication(r,o,s,a,f);var l=Ie()[r/4+0],t=Ie()[r/4+1],i=Ie()[r/4+2];if(i)throw ge(t);return ge(l)}finally{U.__wbindgen_add_to_stack_pointer(16)}}async function Kn(n,e){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,e)}catch(t){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}const l=await n.arrayBuffer();return await WebAssembly.instantiate(l,e)}else{const l=await WebAssembly.instantiate(n,e);return l instanceof WebAssembly.Instance?{instance:l,module:n}:l}}function Yn(){const n={};return n.wbg={},n.wbg.__wbindgen_object_drop_ref=function(e){ge(e)},n.wbg.__wbindgen_number_new=function(e){return he(e)},n.wbg.__wbindgen_object_clone_ref=function(e){const l=Ce(e);return he(l)},n.wbg.__wbindgen_string_new=function(e,l){const t=Mt(e,l);return he(t)},n.wbg.__wbg_set_841ac57cff3d672b=function(e,l,t){Ce(e)[ge(l)]=ge(t)},n.wbg.__wbg_new_898a68150f225f2e=function(){const e=new Array;return he(e)},n.wbg.__wbg_new_b51585de1b234aff=function(){const e=new Object;return he(e)},n.wbg.__wbg_set_502d29070ea18557=function(e,l,t){Ce(e)[l>>>0]=ge(t)},n.wbg.__wbindgen_throw=function(e,l){throw new Error(Mt(e,l))},n}function Jn(n,e){return U=n.exports,Lt.__wbindgen_wasm_module=e,be=null,pe=null,U}async function Lt(n){if(U!==void 0)return U;typeof n>"u"&&(n="/booth/assets/booth_bg.wasm");const e=Yn();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:l,module:t}=await Kn(await n,e);return Jn(l,t)}const Qn=async()=>{await Lt();const n={get_multiplication:Zn};new Gn({target:document.getElementById("app"),props:{bindings:n}})};Qn();
